# 突出大逻辑，隐藏小细节

这个 Part 是讲如何“分层”的。Git 仓库拆分的首要目标是“代码防腐”[[part2]]，其次才是“突出大逻辑，隐藏小细节”，因为我们使用的开源软件（编程语言，库，框架）会逐步把这些隐藏细节的东西都做进去。在未来我们会有更高级的语言和框架可选择，而不用自己来重复发明这些。代码分层是让代码更可读，锦上添花的事情，而不应该成为业务逻辑切分时的首要考虑。自研黑魔法框架往往是次优的选择，应优先选择开源社区的大众化技术方案。

隐藏小细节是为了

* 提高信噪比[[signal-noise]]：当我们读一段的代码时候，更大概率快速获得自己想要的信息，而不是被无关的噪音淹没
* 提高可移植性：例如我们为微信小程序开发的代码，应该能移植到字节小程序上去，而不是和具体的平台完全绑死
* 装配式低代码开发：如果能限定需求的多样性，发明领域特定语言（DSL）来装配“预制件”，从而比“现浇混凝土”实现常规需求更快

度量代码分层不需要新的指标，和“代码防腐”中提出的指标是一样的：

* [[autonomy-metrics]] 度量 Autonomy 的指标
* [[consistency-metrics]] 度量 Consistency 的指标

## 如何隐藏小细节

以下是常见的经典问题，我们有各种各样的“黑魔法”来达成隐藏细节的目的。

TODO

* 隐藏I/O
  * 隐藏“日志监控”细节
  * 隐藏“展示刷新”细节
  * 隐藏“数据库读写”细节
  * 隐藏“统计数据刷新”细节
  * 隐藏“集群变更”细节
* 配置化声明式编程，把复杂的现象分解为“一般性”和“特殊性”两部分
  * 隐藏“优化参数拟合目标函数”细节
  * 需求一致得像一个模子出来的[[prefab-doc]]
