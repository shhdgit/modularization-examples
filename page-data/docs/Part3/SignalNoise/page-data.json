{"componentChunkName":"component---node-modules-gatsby-theme-gardenx-src-templates-local-file-js","path":"/docs/Part3/SignalNoise","result":{"data":{"file":{"childMdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u9605\\u8BFB\\u4E0B\\u9762\\u8FD9\\u6BB5\\u4EE3\\u7801\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-java\"\n  }, \"public class ReserveNumberService {\\n \\n    private final static Logger LOGGER = LoggerFactory.getLogger(SelectNumberService.class);\\n \\n    @Inject\\n    SqlMapClient sqlMapClient;\\n \\n    public void reserverNumber(String userId, String number) {\\n        try {\\n            String oldNumber = (String) sqlMapClient.queryForObject(\\\"reservedNumber\\\", userId);\\n            releaseOldAndReserveNew(userId, oldNumber, number);\\n        } catch (SQLException e) {\\n            LOGGER.error(\\\"failed to reserve number \\\" + number + \\u201C for user \\u201C + userId, e);\\n        }\\n    }\\n \\n    private void releaseOldAndReserveNew(String userId, String oldNumber, String newNumber) throws SQLException {\\n        sqlMapClient.startTransaction();\\n        try {\\n            if (oldNumber != null) {\\n                sqlMapClient.update(\\\"releaseNumber\\\", oldNumber);\\n            }\\n            HashMap params = new HashMap();\\n            params.put(\\\"number\\\", newNumber);\\n            params.put(\\\"usreId\\\", userId);\\n            if (sqlMapClient.update(\\\"reserveNumber\\\", params) == 0) {\\n                throw new RuntimeException(newNumber + \\\" already reserved by someone else\\\");\\n            }\\n            sqlMapClient.commitTransaction();\\n        } finally {\\n            sqlMapClient.endTransaction();\\n        }\\n    }\\n}\\n\")), mdx(\"p\", null, \"\\u4F60\\u7684\\u7B2C\\u4E00\\u5370\\u8C61\\u662F\\u4EC0\\u4E48\\uFF1F\\u6211\\u7684\\u5370\\u8C61\\u662F\\u6EE1\\u5C4F\\u7684sqlMapClient\\u3002\\u4F60\\u80FD\\u7B2C\\u4E00\\u773C\\u5C31\\u8BF4\\u51FA\\u8FD9\\u6BB5\\u4EE3\\u7801\\u4E2D\\u51FA\\u73B0\\u4E86\\u54EA\\u4E9B\\u6982\\u5FF5\\uFF0C\\u53C8\\u89E3\\u51B3\\u4E86\\u4EC0\\u4E48\\u95EE\\u9898\\u5417\\uFF1F\\u6216\\u8BB8\\u4E0D\\u662F\\u90A3\\u4E48\\u5BB9\\u6613\\u7684\\u4E8B\\u60C5\\u3002\\u5982\\u679C\\u7528DDD\\u7684\\u65B9\\u5F0F\\u6765\\u5199\\uFF0C\\u4E5F\\u8BB8\\u662F\\u8FD9\\u6837\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-java\"\n  }, \" public class PhoneNumber {\\n \\n    private final String number;\\n    private User reservedBy;\\n \\n    public PhoneNumber(String number) {\\n        this.number = number;\\n    }\\n \\n    public void reservedBy (User user) {\\n        reservedBy = user;\\n    }\\n \\n    public void release() {\\n        reservedBy = null;\\n    }\\n}\\npublic class User {\\n\\n    private PhoneNumber reservedNumber;\\n \\n    public void reserve(PhoneNumber number) {\\n        if (reservedNumber != null) {\\n            reservedNumber.release();\\n        }\\n        number.reservedBy(this);\\n        this.reservedNumber = number;\\n    }\\n}\\n\")), mdx(\"p\", null, \"\\u901A\\u8FC7\\u9605\\u8BFB\\u4E0A\\u9762\\u7684\\u4EE3\\u7801\\uFF0C\\u6211\\u4EEC\\u4F1A\\u53D1\\u73B0\\u5176\\u4E2D\\u7275\\u6D89\\u5230\\u4E86\\u4E24\\u4E2A\\u9886\\u57DF\\u6982\\u5FF5\\uFF0C\\u5206\\u522B\\u662FUser\\u548CPhoneNumber\\u3002\\u8981\\u5EFA\\u6A21\\u7684\\u95EE\\u9898\\u5176\\u5B9E\\u662FUser\\u5982\\u4F55Reserve\\u4E00\\u4E2APhoneNumber\\u3002\\u4E1A\\u52A1\\u903B\\u8F91\\u662FPhoneNumber\\u53EA\\u80FD\\u88AB\\u4E00\\u4E2AUser\\u9884\\u5B9A\\uFF0C\\u800C\\u4E14\\u4E00\\u4E2AUser\\u53EA\\u80FD\\u9884\\u5B9A\\u4E00\\u4E2APhoneNumber\\uFF0C\\u5982\\u679C\\u8981\\u9884\\u5B9A\\u65B0\\u7684\\u5FC5\\u987B\\u5148\\u91CA\\u653E\\u65E7\\u7684\\u3002\"), mdx(\"p\", null, \"\\u4E5F\\u8BB8\\u4E0A\\u9762\\u7684\\u90A3\\u6BB5\\u4E1A\\u52A1\\u5206\\u6790\\u53EF\\u80FD\\u5C31\\u51FA\\u73B0\\u5728selectNumber\\u8FD9\\u4E2A\\u65B9\\u6CD5\\u7684\\u6CE8\\u91CA\\u91CC\\uFF0C\\u4E5F\\u53EF\\u80FD\\u662F\\u5728\\u67D0\\u67D0\\u8BE6\\u7EC6\\u8BBE\\u8BA1\\u6587\\u6863\\u91CC\\u3002\\u4F46\\u662F\\u4E3A\\u4EC0\\u4E48\\u4E0D\\u80FD\\u8BA9\\u4EE3\\u7801\\u81EA\\u8EAB\\u53CD\\u6620\\u51FA\\u8FD9\\u4E9B\\u4E1A\\u52A1\\u4E0A\\u7684\\u6982\\u5FF5\\u5462\\uFF1F\\u5728\\u6211\\u770B\\u6765\\uFF0C\\u8BA9\\u4EE3\\u7801\\u6210\\u4E3A\\u6C38\\u4E0D\\u8FC7\\u671F\\u7684\\u6587\\u6863\\u5C31\\u662FDDD\\u6574\\u5957\\u7406\\u8BBA\\u7684\\u51FA\\u53D1\\u70B9\\u3002\"), mdx(\"p\", null, \"\\u4F7F\\u7528DDD\\uFF0C\\u5F53\\u6211\\u4EEC\\u5199\\u4EE3\\u7801\\u7684\\u65F6\\u5019\\uFF0C\\u5C31\\u53EF\\u4EE5\\u5173\\u6CE8\\u5728PhoneNumber\\u548CUser\\u7684\\u903B\\u8F91\\u5173\\u7CFB\\u4E0A\\u3002\\u5F53\\u6211\\u4EEC\\u548C\\u5176\\u4ED6\\u5F00\\u53D1\\u4EBA\\u5458\\u4EA4\\u6D41\\u7684\\u65F6\\u5019\\uFF0C\\u5C31\\u53EF\\u4EE5\\u8BB2PhoneNumber\\u5982\\u4F55\\u5982\\u4F55\\uFF0CUser\\u5982\\u4F55\\u5982\\u4F55\\uFF0C\\u800C\\u4E0D\\u7528\\u8BF4\\u67D0\\u67D0\\u8868\\u7684\\u67D0\\u67D0\\u5B57\\u6BB5\\u662F\\u4EC0\\u4E48\\u503C\\u3002\\u5F53\\u6211\\u4EEC\\u548C\\u4E1A\\u52A1\\u4EBA\\u5458\\u4EA4\\u6D41\\u7684\\u65F6\\u5019\\uFF0C\\u81F3\\u5C11\\u6211\\u4EEC\\u4E0D\\u7528\\u5728\\u5BF9\\u8BDD\\u91CC\\u63D0\\u5230sqlMapClient\\u5982\\u4F55\\u5982\\u4F55\\u3002\"));\n}\n;\nMDXContent.isMDXComponent = true;","outboundReferences":[],"inboundReferences":[]},"fields":{"slug":"/docs/Part3/SignalNoise","title":"SignalNoise"}}},"pageContext":{"id":"5a119092-21b9-5493-9419-f1365a385d05"}},"staticQueryHashes":["2098632890","2221750479","2468095761"]}